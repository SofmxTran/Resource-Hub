<%- include('../partials/head', { title }) %>
<%- include('../partials/navbar') %>
<div class="container py-5">
  <%- include('../partials/messages') %>
  <h1 class="mb-4" data-aos="fade-up">
    <i class="fas fa-shield-alt me-2 text-primary"></i>Admin Dashboard
  </h1>
  <p class="text-muted mb-4" data-aos="fade-up" data-aos-delay="100">Quick overview of community activity.</p>
  <div class="row g-4 mb-4">
    <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
      <div class="card text-center h-100">
        <div class="card-body">
          <i class="fas fa-users fa-3x text-primary mb-3"></i>
          <p class="text-muted mb-1">Total Users</p>
          <h2 class="fw-bold text-primary"><%= stats.totalUsers %></h2>
        </div>
      </div>
    </div>
    <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
      <div class="card text-center h-100">
        <div class="card-body">
          <i class="fas fa-folder fa-3x text-accent mb-3"></i>
          <p class="text-muted mb-1">Total Resources</p>
          <h2 class="fw-bold text-accent"><%= stats.totalResources %></h2>
        </div>
      </div>
    </div>
    <div class="col-md-4" data-aos="fade-up" data-aos-delay="400">
      <div class="card text-center h-100 border-warning">
        <div class="card-body">
          <i class="fas fa-clock fa-3x text-warning mb-3"></i>
          <p class="text-muted mb-1">Pending Approvals</p>
          <h2 class="fw-bold text-warning"><%= stats.pendingResources %></h2>
          <a href="/admin/resources?status=PENDING" class="btn btn-sm btn-warning mt-2">
            <i class="fas fa-eye me-1"></i>Review Now
          </a>
        </div>
      </div>
    </div>
  </div>

  <div class="card" data-aos="fade-up" data-aos-delay="500">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="mb-0">
          <i class="fas fa-list me-2 text-primary"></i>Pending Public Resources
        </h4>
        <a href="/admin/resources" class="btn btn-sm btn-outline-primary">
          <i class="fas fa-cog me-1"></i>Manage All
        </a>
      </div>
      <% if (stats.pendingList.length) { %>
      <div class="list-group">
        <% stats.pendingList.forEach((item, index) => { %>
        <div class="list-group-item d-flex justify-content-between align-items-center" data-aos="fade-up" data-aos-delay="<%= index * 50 %>">
          <div>
            <strong><%= item.title %></strong>
            <p class="mb-0 small text-muted">
              <i class="fas fa-user me-1"></i>
              <strong><%= item.display_name || item.full_name || item.username %></strong>
              <a href="/u/<%= item.username %>" class="text-primary">(@<%= item.username %>)</a> â€¢ 
              <i class="fas fa-tag me-1"></i><%= item.domain_name || 'Uncategorized' %>
            </p>
          </div>
          <div class="d-flex gap-2">
            <form action="/admin/resources/<%= item.id %>/approve" method="POST" class="mb-0">
              <button type="submit" class="btn btn-sm btn-success">
                <i class="fas fa-check me-1"></i>Approve
              </button>
            </form>
            <form action="/admin/resources/<%= item.id %>/reject" method="POST" class="mb-0">
              <button type="submit" class="btn btn-sm btn-outline-danger">
                <i class="fas fa-times me-1"></i>Reject
              </button>
            </form>
          </div>
        </div>
        <% }) %>
      </div>
      <% } else { %>
      <p class="text-muted mb-0 text-center py-4">
        <i class="fas fa-check-circle fa-3x text-success mb-3 d-block"></i>
        No pending public submissions ðŸŽ‰
      </p>
      <% } %>
    </div>
  </div>
</div>
<%- include('../partials/footer') %>

